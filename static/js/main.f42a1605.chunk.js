(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,a){e.exports=a(86)},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},75:function(e,t){},77:function(e,t){},86:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(44),s=a.n(o),i=(a(57),a(32)),l=a.n(i),c=a(45),u=a(46),m=a(47),d=a(50),h=a(48),p=a(51),v=(a(59),a(60),a(7)),f=function(e){var t=e.recursiveFetchAndWait;return r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",placeholder:"Enter BGG Username",name:"username",id:"searchBox",onKeyPress:function(e){"Enter"===e.key&&(v.a.event({category:"Collection Request",action:"Enter key pressed"}),t("https://cors-anywhere.herokuapp.com/https://api.geekdo.com/xmlapi2/collection?username="+e.target.value+"&own=1&stats=1&excludesubtype=boardgameexpansion"))}}),r.a.createElement("button",{type:"button",onClick:function(e){v.a.event({category:"Collection Request",action:"Clicked Submit"}),t("https://cors-anywhere.herokuapp.com/https://api.geekdo.com/xmlapi2/collection?username="+document.querySelector("#searchBox").value+"&own=1&stats=1&excludesubtype=boardgameexpansion")}},"Submit"))},g=a(49);a(63);v.a.initialize("UA-139517114-1"),v.a.pageview(window.location.pathname+window.location.search);var y=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).setTimeoutAsCallback=function(e){setTimeout(e,5e3)},e.recursiveFetchAndWait=function(t){var n=a(64).parseString;e.setState({loading:!0}),fetch(t).then(function(){var a=Object(c.a)(l.a.mark(function a(r){var o;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(200!==r.status){a.next=8;break}return a.next=3,r.text();case 3:return o=a.sent,e.setState({loading:!1}),a.abrupt("return",n(o,function(t,a){"0"!==a.items.$.totalitems&&(a.items.item.forEach(function(e){"Not Ranked"===e.stats[0].rating[0].ranks[0].rank[0].$.value?e.stats[0].rating[0].ranks[0].rank[0].$.value="N/A":e.stats[0].rating[0].ranks[0].rank[0].$.value=Number(e.stats[0].rating[0].ranks[0].rank[0].$.value),e.stats[0].$.minplayers=Number(e.stats[0].$.minplayers),isNaN(e.stats[0].$.minplayers)&&(e.stats[0].$.minplayers="--"),e.stats[0].$.maxplayers=Number(e.stats[0].$.maxplayers),isNaN(e.stats[0].$.maxplayers)&&(e.stats[0].$.maxplayers="--"),e.stats[0].$.maxplaytime=Number(e.stats[0].$.maxplaytime),isNaN(e.stats[0].$.maxplaytime)&&(e.stats[0].$.maxplaytime="--"),void 0===e.yearpublished&&(e.yearpublished=["--"])}),e.setState({gameList:a.items.item}))}));case 8:202===r.status?e.setTimeoutAsCallback(function(){return e.recursiveFetchAndWait(t)}):console.log(r.status);case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())},e.addFilterPlaceholder=function(){var e=document.querySelectorAll("div.rt-th > input"),t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.placeholder="Search..."}}catch(s){a=!0,n=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}},e.state={gameList:[],loading:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.addFilterPlaceholder();var e=new URL(document.location).searchParams.get("username");if(null!==e){v.a.event({category:"Collection Request",action:"URL Param entered"});var t="https://cors-anywhere.herokuapp.com/https://api.geekdo.com/xmlapi2/collection?username="+e+"&own=1&stats=1&excludesubtype=boardgameexpansion";this.recursiveFetchAndWait(t)}}},{key:"render",value:function(){var e=[{Header:"Rank",accessor:"stats[0].rating[0].ranks[0].rank[0].$.value",maxWidth:75,sortMethod:function(e,t){return(e=null===e||void 0===e||"N/A"===e?1/0:e)>(t=null===t||void 0===t||"N/A"===t?1/0:t)?1:e<t?-1:0}},{Header:"",accessor:"thumbnail[0]",maxWidth:75,sortable:!1,Cell:function(e){return r.a.createElement("img",{src:e.value,width:"64",alt:"thumbnail",className:"thumbnail"})}},{Header:"Title",accessor:"name[0]._",minWidth:150,maxWidth:450,filterable:!0,style:{whiteSpace:"unset"},Cell:function(e){return r.a.createElement("div",{className:"title"},r.a.createElement("a",{href:"https://boardgamegeek.com/boardgame/"+e.original.$.objectid,target:"_blank",rel:"noopener noreferrer"},e.value)," ",r.a.createElement("span",{className:"yearPublished"},"(",e.original.yearpublished[0],")"))}},{Header:"Avg Rating",accessor:"stats[0].rating[0].average[0].$.value",defaultSortDesc:!0,maxWidth:100,Cell:function(e){return r.a.createElement("div",{className:"ratingContainer"},r.a.createElement("div",{className:"averageRating",style:{backgroundColor:Math.round(10*e.value)/10>=9?"#249563":Math.round(10*e.value)/10>=8?"#2fc482":Math.round(10*e.value)/10>=7?"#1d8acd":Math.round(10*e.value)/10>=5?"#5369a2":Math.round(10*e.value)/10>=3?"#df4751":"#db303b"}},Math.round(10*e.value)/10))}},{Header:"Min Players",accessor:"stats[0].$.minplayers",maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?1/0:e)>(t=null===t||void 0===t||"--"===t?1/0:t)?1:e<t?-1:0}},{Header:"Max Players",accessor:"stats[0].$.maxplayers",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0}},{Header:"Play Time",accessor:"stats[0].$.maxplaytime",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0},Cell:function(e){return r.a.createElement("span",null,e.value," Min")}}];return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,r.a.createElement("a",{className:"h1Link",href:"."},"Better BGG Collection")),r.a.createElement("p",{className:"description"},"Enter your BoardGameGeek username below to pull up your collection!"),r.a.createElement(f,{recursiveFetchAndWait:this.recursiveFetchAndWait}),r.a.createElement("p",{className:"tipText"},"Tip: Hold shift when sorting to multi-sort!"),r.a.createElement(g.a,{data:this.state.gameList,columns:e,defaultSorted:[{id:"stats[0].rating[0].ranks[0].rank[0].$.value",desc:!1}],showPaginationTop:!0,minRows:5,pageSizeOptions:[5,10,20,25,50,100,300,500,1e3,2e3,5e3],defaultPageSize:300,loading:this.state.loading,noDataText:"No games found or you haven't entered your username yet",className:"-highlight",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a]).toLowerCase().includes(e.value.toLowerCase())}}),r.a.createElement("div",{id:"footer"},r.a.createElement("p",null,"Page created with ",r.a.createElement("span",{role:"img","aria-label":"Red Heart"},"\u2764\ufe0f"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[52,1,2]]]);
//# sourceMappingURL=main.f42a1605.chunk.js.map
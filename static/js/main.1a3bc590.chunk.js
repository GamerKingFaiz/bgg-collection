(this["webpackJsonpbgg-collection"]=this["webpackJsonpbgg-collection"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},81:function(e,t){},83:function(e,t){},93:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(54),r=a.n(i),s=(a(61),a(20)),o=(a(62),"https://web-production-de84.up.railway.app"),c="".concat(o,"/https://boardgamegeek.com/xmlapi2/thing?stats=1&id="),l="".concat(o,"/https://api.geekdo.com/xmlapi2/collection?own=1&stats=1&excludesubtype=boardgameexpansion&username="),u=(a(63),a(8)),d=a(2),h=function(e){var t=e.recursiveFetchAndWait,a=e.setGameList;return Object(d.jsxs)("div",{className:"search",children:[Object(d.jsx)("input",{type:"text",placeholder:"Enter BGG Username",name:"username",id:"searchBox",onKeyPress:function(e){"Enter"===e.key&&(u.a.event({category:"Collection Request",action:"Enter key pressed"}),a([]),t(l+e.target.value))}}),Object(d.jsx)("button",{type:"button",onClick:function(e){u.a.event({category:"Collection Request",action:"Clicked Submit"}),a([]),t(l+document.querySelector("#searchBox").value)},children:"Submit"})]})},m=function(e){e.forEach((function(e){"Not Ranked"===e.statistics[0].ratings[0].ranks[0].rank[0].$.value?e.statistics[0].ratings[0].ranks[0].rank[0].$.value="N/A":e.statistics[0].ratings[0].ranks[0].rank[0].$.value=Number(e.statistics[0].ratings[0].ranks[0].rank[0].$.value),e.minplayers[0].$.value=Number(e.minplayers[0].$.value),isNaN(e.minplayers[0].$.value)&&(e.stats[0].$.minplayers="--"),e.maxplayers[0].$.value=Number(e.maxplayers[0].$.value),isNaN(e.maxplayers[0].$.value)&&(e.maxplayers[0].$.value="--"),e.maxplaytime[0].$.value=Number(e.maxplaytime[0].$.value),isNaN(e.maxplaytime[0].$.value)&&(e.maxplaytime[0].$.value="--"),void 0===e.yearpublished[0].$.value&&(e.yearpublished[0].$.value=["--"])}))},v=a(55),f=[{Header:"Rank",accessor:"statistics[0].ratings[0].ranks[0].rank[0].$.value",maxWidth:75,sortMethod:function(e,t){return(e=null===e||void 0===e||"N/A"===e?1/0:e)>(t=null===t||void 0===t||"N/A"===t?1/0:t)?1:e<t?-1:0}},{Header:"",accessor:"thumbnail[0]",maxWidth:75,sortable:!1,Cell:function(e){return Object(d.jsx)("img",{src:e.value,width:"64",alt:"thumbnail",className:"thumbnail"})}},{Header:"Title",accessor:"name[0].$.value",minWidth:150,maxWidth:450,filterable:!0,style:{whiteSpace:"unset"},Cell:function(e){return Object(d.jsxs)("div",{className:"title",children:[Object(d.jsx)("a",{href:"https://boardgamegeek.com/boardgame/"+e.original.$.id,target:"_blank",rel:"noopener noreferrer",children:e.value})," ",Object(d.jsxs)("span",{className:"yearPublished",children:["(",e.original.yearpublished[0].$.value,")"]})]})}},{Header:"Avg Rating",accessor:"statistics[0].ratings[0].average[0].$.value",defaultSortDesc:!0,maxWidth:100,Cell:function(e){return Object(d.jsx)("div",{className:"ratingContainer",children:Object(d.jsx)("div",{className:"averageRating",style:{backgroundColor:Math.round(10*e.value)/10>=9?"#249563":Math.round(10*e.value)/10>=8?"#2fc482":Math.round(10*e.value)/10>=7?"#1d8acd":Math.round(10*e.value)/10>=5?"#5369a2":Math.round(10*e.value)/10>=3?"#df4751":"#db303b"},children:Math.round(10*e.value)/10})})}},{Header:"Min Players",accessor:"minplayers[0].$.value",maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?1/0:e)>(t=null===t||void 0===t||"--"===t?1/0:t)?1:e<t?-1:0}},{Header:"Max Players",accessor:"maxplayers[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0}},{Header:"Play Time",accessor:"maxplaytime[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0},Cell:function(e){return Object(d.jsxs)("span",{children:[e.value," Min"]})}},{Header:"Weight",accessor:"statistics[0].ratings[0].averageweight[0].$.value",maxWidth:100,Cell:function(e){return Object(d.jsxs)("strong",{children:[Object(d.jsx)("span",{style:{color:Math.round(100*e.value)/100>=5||Math.round(100*e.value)/100>=4||Math.round(100*e.value)/100>=3?"#ff6b26":(Math.round(100*e.value),"#5bda98")},children:Math.round(100*e.value)/100})," / 5"]})}}],b=a(19),p=a.n(b),g=a(56);a(92);u.a.initialize("UA-139517114-1"),u.a.pageview(window.location.pathname+window.location.search);var j=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)(!1),o=Object(s.a)(r,2),b=o[0],j=o[1],x=Object(n.useState)(void 0),y=Object(s.a)(x,2),O=y[0],$=y[1],k=Object(n.useCallback)((function(e){j(!0),fetch(e).then((function(t){if(200===t.status)return t.text();202===t.status?setTimeout((function(){return k(e)}),5e3):console.log("error: ",t.status)})).then((function(e){var t,a=[],n=[];if(p.a.parseString(e,(function(e,i){if("0"!==i.items.$.totalitems&&(t=Number(i.items.$.totalitems),i.items.item.forEach((function(e){a.push(e.$.objectid)}))),t>1200)for(;a.length;)n.push(a.splice(0,1200))})),t>0&&t<=1200)return fetch(c+a.join()).then((function(e){return e.text()})).then((function(e){return p.a.parseString(e,(function(e,t){m(t.items.item),i((function(e){return e.concat(t.items.item)})),j(!1)}))}));n.forEach((function(e){fetch(c+e.join()).then((function(e){return e.text()})).then((function(e){return p.a.parseString(e,(function(e,t){m(t.items.item),i((function(e){return e.concat(t.items.item)}))}))}))})),j(!1)}))}),[]);return Object(n.useEffect)((function(){!function(){var e,t=document.querySelectorAll("div.rt-th > input"),a=Object(v.a)(t);try{for(a.s();!(e=a.n()).done;)e.value.placeholder="Search..."}catch(n){a.e(n)}finally{a.f()}}();var e=new URL(document.location).searchParams,t=e.get("username"),a=e.get("rows");(null!==a&&$(Number(a)),null!==t)&&(u.a.event({category:"Collection Request",action:"URL Param entered"}),k(l+t))}),[k]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:Object(d.jsx)("a",{className:"h1Link",href:".",children:"Better BGG Collection"})}),Object(d.jsx)("p",{className:"description",children:"Enter your BoardGameGeek username below to pull up your collection!"}),Object(d.jsx)(h,{recursiveFetchAndWait:k,setGameList:i}),Object(d.jsx)("p",{className:"tipText",children:"Tip: Hold shift when sorting to multi-sort!"}),Object(d.jsx)(g.a,{data:a,columns:f,defaultSorted:[{id:"statistics[0].ratings[0].ranks[0].rank[0].$.value",desc:!1}],showPaginationTop:!0,minRows:5,pageSizeOptions:[5,10,20,25,50,100,300,500,1e3,2e3,5e3,1e4],defaultPageSize:300,pageSize:O,loading:b,noDataText:"No games found or you haven't entered your username yet",className:"-highlight",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a]).toLowerCase().includes(e.value.toLowerCase())}}),Object(d.jsx)("div",{id:"footer",children:Object(d.jsxs)("p",{children:["Page created with ",Object(d.jsx)("span",{role:"img","aria-label":"Red Heart",children:"\u2764\ufe0f"})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(d.jsx)(j,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[93,1,2]]]);
//# sourceMappingURL=main.1a3bc590.chunk.js.map
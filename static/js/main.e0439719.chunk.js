(this["webpackJsonpbgg-collection"]=this["webpackJsonpbgg-collection"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},81:function(e,t){},83:function(e,t){},96:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(53),i=a.n(r),s=(a(61),a(39)),o=a(54),c=a(19),l=(a(62),"https://web-production-de84.up.railway.app"),u="".concat(l,"/https://boardgamegeek.com/xmlapi2/thing?stats=1&id="),d="".concat(l,"/https://api.geekdo.com/xmlapi2/collection?own=1&stats=1&excludesubtype=boardgameexpansion&username="),m=(a(63),a(2)),h=function(e){var t=e.recursiveFetchAndWait,a=e.setGameList;return Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("input",{type:"text",placeholder:"Enter BGG Username",name:"username",id:"searchBox",onKeyPress:function(e){"Enter"===e.key&&(window.umami.track("Enter key pressed"),a([]),t(d+e.target.value.toLowerCase()))}}),Object(m.jsx)("button",{type:"button",onClick:function(e){window.umami.track("Clicked Submit"),a([]),t(d+document.querySelector("#searchBox").value.toLowerCase())},children:"Submit"})]})},b=function(e,t){e.forEach((function(e){e.name[0].$.value=t[e.$.id].name[0]._,t[e.$.id].thumbnail&&(e.thumbnail[0]=t[e.$.id].thumbnail[0]),"Not Ranked"===e.statistics[0].ratings[0].ranks[0].rank[0].$.value?e.statistics[0].ratings[0].ranks[0].rank[0].$.value="N/A":e.statistics[0].ratings[0].ranks[0].rank[0].$.value=Number(e.statistics[0].ratings[0].ranks[0].rank[0].$.value),e.minplayers[0].$.value=Number(e.minplayers[0].$.value),isNaN(e.minplayers[0].$.value)&&(e.stats[0].$.minplayers="--"),e.maxplayers[0].$.value=Number(e.maxplayers[0].$.value),isNaN(e.maxplayers[0].$.value)&&(e.maxplayers[0].$.value="--"),e.maxplaytime[0].$.value=Number(e.maxplaytime[0].$.value),isNaN(e.maxplaytime[0].$.value)&&(e.maxplaytime[0].$.value="--"),t[e.$.id].yearpublished&&(e.yearpublished[0].$.value=t[e.$.id].yearpublished[0]),void 0!==e.yearpublished[0].$.value&&0!==e.yearpublished[0].$.value||(e.yearpublished[0].$.value="--")}))},v=a(55),p=[{Header:"Rank",accessor:"statistics[0].ratings[0].ranks[0].rank[0].$.value",maxWidth:75,sortMethod:function(e,t){return(e=null===e||void 0===e||"N/A"===e?1/0:e)>(t=null===t||void 0===t||"N/A"===t?1/0:t)?1:e<t?-1:0}},{Header:"",accessor:"thumbnail[0]",maxWidth:75,sortable:!1,Cell:function(e){return Object(m.jsx)("img",{src:e.value,width:"64",alt:"thumbnail",className:"thumbnail"})}},{Header:"Title",accessor:"name[0].$.value",minWidth:150,maxWidth:450,filterable:!0,style:{whiteSpace:"unset"},Cell:function(e){return Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("a",{href:"https://boardgamegeek.com/boardgame/"+e.original.$.id,target:"_blank",rel:"noopener noreferrer",children:e.value})," ",Object(m.jsxs)("span",{className:"yearPublished",children:["(",e.original.yearpublished[0].$.value,")"]})]})}},{Header:"Avg Rating",accessor:"statistics[0].ratings[0].average[0].$.value",defaultSortDesc:!0,maxWidth:100,Cell:function(e){return Object(m.jsx)("div",{className:"ratingContainer",children:Object(m.jsx)("div",{className:"averageRating",style:{backgroundColor:Math.round(10*e.value)/10>=9?"#249563":Math.round(10*e.value)/10>=8?"#2fc482":Math.round(10*e.value)/10>=7?"#1d8acd":Math.round(10*e.value)/10>=5?"#5369a2":Math.round(10*e.value)/10>=3?"#df4751":"#db303b"},children:Math.round(10*e.value)/10})})}},{Header:"Min Players",accessor:"minplayers[0].$.value",maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?1/0:e)>(t=null===t||void 0===t||"--"===t?1/0:t)?1:e<t?-1:0}},{Header:"Max Players",accessor:"maxplayers[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0}},{Header:"Play Time",accessor:"maxplaytime[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0},Cell:function(e){return Object(m.jsxs)("span",{children:[e.value," Min"]})}},{Header:"Weight",accessor:"statistics[0].ratings[0].averageweight[0].$.value",maxWidth:100,Cell:function(e){return Object(m.jsxs)("strong",{children:[Object(m.jsx)("span",{style:{color:Math.round(100*e.value)/100>=5||Math.round(100*e.value)/100>=4||Math.round(100*e.value)/100>=3?"#ff6b26":(Math.round(100*e.value),"#5bda98")},children:Math.round(100*e.value)/100})," / 5"]})}}],f=a(18),j=a.n(f),g=a(56),x=(a(95),function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),l=Object(c.a)(i,2),f=l[0],x=l[1],y=Object(n.useState)(void 0),$=Object(c.a)(y,2),O=$[0],k=$[1],w=Object(n.useCallback)((function(e){x(!0),fetch(e).then((function(t){if(200===t.status)return t.text();202===t.status?setTimeout((function(){return w(e)}),5e3):console.log("error: ",t.status)})).then(function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var a,n,i,o,c,l,d,m;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],i={},o=[],j.a.parseString(t,(function(e,t){if(t.items&&"0"!==t.items.$.totalitems&&(a=Number(t.items.$.totalitems),t.items.item.forEach((function(e){n.push(e.$.objectid),i[e.$.objectid]=e}))),a>20)for(;n.length;)o.push(n.splice(0,20))})),!(a>0&&a<=20)){e.next=8;break}return e.abrupt("return",fetch(u+n.join()).then((function(e){return e.text()})).then((function(e){return j.a.parseString(e,(function(e,t){b(t.items.item,i),r((function(e){return e.concat(t.items.item)})),x(!1)}))})));case 8:return c=o.map((function(e){return fetch(u+e.join())})),e.next=11,Promise.all(c);case 11:return l=e.sent,d=l.map((function(e){return e.text()})),e.next=15,Promise.all(d);case 15:return m=e.sent,e.abrupt("return",m.map((function(e){return j.a.parseString(e,(function(e,t){b(t.items.item,i),r((function(e){return e.concat(t.items.item)})),x(!1)}))})));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(n.useEffect)((function(){!function(){var e,t=document.querySelectorAll("div.rt-th > input"),a=Object(v.a)(t);try{for(a.s();!(e=a.n()).done;)e.value.placeholder="Search..."}catch(n){a.e(n)}finally{a.f()}}();var e=new URL(document.location).searchParams,t=e.get("username"),a=e.get("rows");if(null!==a&&k(Number(a)),null!==t){var n=d+t.toLowerCase();w(n)}}),[w]),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:Object(m.jsx)("a",{className:"h1Link",href:".",children:"Better BGG Collection"})}),Object(m.jsxs)("h2",{children:[Object(m.jsx)("strong",{children:"NOTE:"})," BoardGameGeek made recent changes to their API. I'm awaiting an API key so I can update this app accordingly."]}),Object(m.jsx)("h2",{children:"Sorry for the inconvenience."}),Object(m.jsx)("p",{className:"description",children:"Enter your BoardGameGeek username below to pull up your collection!"}),Object(m.jsx)(h,{recursiveFetchAndWait:w,setGameList:r}),Object(m.jsx)("p",{className:"tipText",children:"Tip: Hold shift when sorting to multi-sort!"}),Object(m.jsx)(g.a,{data:a,columns:p,defaultSorted:[{id:"statistics[0].ratings[0].ranks[0].rank[0].$.value",desc:!1}],showPaginationTop:!0,minRows:5,pageSizeOptions:[5,10,20,25,50,100,300,500,1e3,2e3,5e3,1e4],defaultPageSize:300,pageSize:O,loading:f,noDataText:"No games found or you haven't entered your username yet",className:"-highlight",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a]).toLowerCase().includes(e.value.toLowerCase())}}),Object(m.jsx)("div",{id:"footer",children:Object(m.jsxs)("p",{children:["Page created with ",Object(m.jsx)("span",{role:"img","aria-label":"Red Heart",children:"\u2764\ufe0f"})]})})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(m.jsx)(x,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[96,1,2]]]);
//# sourceMappingURL=main.e0439719.chunk.js.map
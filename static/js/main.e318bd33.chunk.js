(this["webpackJsonpbgg-collection"]=this["webpackJsonpbgg-collection"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},81:function(e,t){},83:function(e,t){},96:function(e,t,a){"use strict";a.r(t);var n,r=a(1),i=a(53),l=a.n(i),s=(a(61),a(39)),o=a(54),c=a(19),u=(a(62),"https://api.betterbggcollection.com/"),d="".concat(u,"xmlapi2/thing?stats=1&id="),L="".concat(u,"xmlapi2/collection?own=1&stats=1&excludesubtype=boardgameexpansion&username="),m=(a(63),a(2)),h=function(e){var t=e.recursiveFetchAndWait,a=e.setGameList;return Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("input",{type:"text",placeholder:"Enter BGG Username",name:"username",id:"searchBox",onKeyPress:function(e){"Enter"===e.key&&(window.umami.track("Enter key pressed"),a([]),t(L+e.target.value.toLowerCase()))}}),Object(m.jsx)("button",{type:"button",onClick:function(e){window.umami.track("Clicked Submit"),a([]),t(L+document.querySelector("#searchBox").value.toLowerCase())},children:"Submit"})]})},b=function(e,t){e.forEach((function(e){e.name[0].$.value=t[e.$.id].name[0]._,t[e.$.id].thumbnail&&(e.thumbnail[0]=t[e.$.id].thumbnail[0]),"Not Ranked"===e.statistics[0].ratings[0].ranks[0].rank[0].$.value?e.statistics[0].ratings[0].ranks[0].rank[0].$.value="N/A":e.statistics[0].ratings[0].ranks[0].rank[0].$.value=Number(e.statistics[0].ratings[0].ranks[0].rank[0].$.value),e.minplayers[0].$.value=Number(e.minplayers[0].$.value),isNaN(e.minplayers[0].$.value)&&(e.stats[0].$.minplayers="--"),e.maxplayers[0].$.value=Number(e.maxplayers[0].$.value),isNaN(e.maxplayers[0].$.value)&&(e.maxplayers[0].$.value="--"),e.maxplaytime[0].$.value=Number(e.maxplaytime[0].$.value),isNaN(e.maxplaytime[0].$.value)&&(e.maxplaytime[0].$.value="--"),t[e.$.id].yearpublished&&(e.yearpublished[0].$.value=t[e.$.id].yearpublished[0]),void 0!==e.yearpublished[0].$.value&&0!==e.yearpublished[0].$.value||(e.yearpublished[0].$.value="--")}))},p=a(55),f=["title","titleId"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(this,arguments)}function g(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function j(e,t){var a=e.title,i=e.titleId,l=g(e,f);return r.createElement("svg",v({width:"342px",height:"76px",viewBox:"0 0 342 76",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":i},l),void 0===a?r.createElement("title",{id:i},"powered-by-bgg-rgb"):a?r.createElement("title",{id:i},a):null,n||(n=r.createElement("g",{id:"powered-by-bgg-rgb",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"Group",transform:"translate(0.654300, 0.296900)"},r.createElement("path",{d:"M106.3372,25.7535 C108.0022,25.7535 109.0062,26.8855 108.8182,28.5505 L106.7492,46.8565 C106.5612,48.5195 105.3022,49.6535 103.6372,49.6535 L91.3492,49.6535 C89.6842,49.6535 88.6812,48.5195 88.8682,46.8565 L90.9362,28.5505 C91.1242,26.8855 92.3862,25.7535 94.0502,25.7535 L106.3372,25.7535 Z M119.4023,25.7534 L119.7953,40.7644 L124.7123,25.7534 L129.7763,25.7534 L131.1723,40.3404 L135.0883,25.7534 L140.6113,25.7534 L133.4133,49.6534 L127.9953,49.6534 L125.8183,36.3394 L120.5253,49.6534 L115.2153,49.6534 L113.3823,25.7534 L119.4023,25.7534 Z M160.6848,25.7534 L160.1048,30.8864 L150.6148,30.8864 L150.1418,35.0664 L158.3578,35.0664 L157.7808,40.1644 L149.5668,40.1644 L149.0788,44.4844 L158.5678,44.4844 L157.9848,49.6534 L142.3698,49.6534 L145.0698,25.7534 L160.6848,25.7534 Z M206.2849,25.7534 L205.7049,30.8864 L196.2169,30.8864 L195.7449,35.0664 L203.9599,35.0664 L203.3829,40.1644 L195.1679,40.1644 L194.6809,44.4844 L204.1689,44.4844 L203.5849,49.6534 L187.9719,49.6534 L190.6709,25.7534 L206.2849,25.7534 Z M289.8932,25.7533 C291.8432,25.7533 292.9402,26.9913 292.7412,28.7623 L292.1412,34.0723 C291.9572,35.7023 290.7182,37.2593 288.4632,37.7913 C290.5992,38.3213 291.6692,39.8083 291.4892,41.4033 L290.9012,46.6063 C290.6892,48.4843 289.3182,49.6533 287.3702,49.6533 L272.4642,49.6533 L275.1642,25.7533 L289.8932,25.7533 Z M83.714,25.7529 C85.165,25.7529 86.272,26.9209 86.099,28.4429 L84.711,40.7309 C84.551,42.1469 83.169,43.4219 81.717,43.4219 L73.253,43.4219 L72.55,49.6529 L66.389,49.6529 L69.09,25.7529 L83.714,25.7529 Z M181.6448,25.7537 C183.0968,25.7537 184.2028,26.9207 184.0308,28.4427 L182.7948,39.3847 C182.6308,40.8367 181.2518,42.0747 179.7998,42.0747 L179.6228,42.0747 L181.7048,49.6527 L175.6858,49.6527 L173.5688,42.0747 L170.9478,42.0747 L170.0918,49.6527 L163.9318,49.6527 L166.6318,25.7537 L181.6448,25.7537 Z M225.0852,25.7531 C227.7052,25.7531 229.6932,27.9131 229.3892,30.6031 L227.7892,44.7671 C227.4802,47.4941 225.0062,49.6521 222.3862,49.6521 L209.5312,49.6521 L212.2312,25.7531 L225.0852,25.7531 Z M316.8386,25.7531 L316.2586,30.8871 L305.1746,30.8871 C304.9976,30.8871 304.8016,31.0641 304.7776,31.2761 L304.7776,31.2761 L303.3296,44.0941 C303.3046,44.3071 303.4656,44.4481 303.6426,44.4481 L303.6426,44.4481 L308.6006,44.4481 C308.8476,44.4481 309.0056,44.3071 309.0306,44.0941 L309.0306,44.0941 L309.4866,40.0581 L306.1996,40.0581 L308.7676,34.9941 L315.7196,34.9941 L314.3386,46.9271 C314.1626,48.4841 312.8266,49.6521 311.3046,49.6521 L311.3046,49.6521 L299.3376,49.6521 C297.8136,49.6521 296.7066,48.4841 296.8826,46.9271 L296.8826,46.9271 L298.9716,28.4431 C299.1356,26.9921 300.5136,25.7531 302.0386,25.7531 L302.0386,25.7531 L316.8386,25.7531 Z M340.6911,25.7531 L340.1111,30.8871 L329.0271,30.8871 C328.8501,30.8871 328.6541,31.0641 328.6311,31.2761 L328.6311,31.2761 L327.1821,44.0941 C327.1571,44.3071 327.3181,44.4481 327.4951,44.4481 L327.4951,44.4481 L332.4531,44.4481 C332.6991,44.4481 332.8581,44.3071 332.8831,44.0941 L332.8831,44.0941 L333.3391,40.0581 L330.0521,40.0581 L332.6201,34.9941 L339.5721,34.9941 L338.1911,46.9271 C338.0161,48.4841 336.6791,49.6521 335.1571,49.6521 L335.1571,49.6521 L323.1901,49.6521 C321.6661,49.6521 320.5591,48.4841 320.7341,46.9271 L320.7341,46.9271 L322.8231,28.4431 C322.9881,26.9921 324.3661,25.7531 325.8911,25.7531 L325.8911,25.7531 L340.6911,25.7531 Z M285.2212,39.8443 L279.6972,39.8443 L279.1002,45.1203 L284.6252,45.1203 C284.8732,45.1203 284.9992,44.9443 285.0182,44.7663 L285.5312,40.2343 C285.5512,40.0583 285.4692,39.8443 285.2212,39.8443 Z M248.408,30.5417 C249.576,30.5417 250.234,31.2837 250.114,32.3457 L249.755,35.5287 C249.645,36.5037 248.902,37.4387 247.55,37.7577 C248.83,38.0747 249.473,38.9657 249.363,39.9207 L249.012,43.0397 C248.885,44.1637 248.063,44.8647 246.896,44.8647 L237.963,44.8647 L239.581,30.5417 L248.408,30.5417 Z M257.2558,30.5412 L256.5098,37.1402 C256.4978,37.2472 256.6128,37.3532 256.7188,37.3532 L259.6688,37.3532 C259.7958,37.3532 259.8298,37.2472 259.8418,37.1402 L260.5858,30.5412 L264.2798,30.5412 L263.3268,38.9652 C263.2218,39.8992 262.3918,40.6632 261.5238,40.6632 L259.6338,40.6632 L259.1578,44.8642 L255.4668,44.8642 L255.9418,40.6632 L254.0308,40.6632 C253.1628,40.6632 252.5058,39.8992 252.6118,38.9652 L253.5638,30.5412 L257.2558,30.5412 Z M101.9992,30.9215 L97.1492,30.9215 C97.0072,30.9215 96.8102,31.0995 96.7872,31.3115 L95.3332,44.1645 C95.3132,44.3415 95.4742,44.4845 95.6172,44.4845 L100.4672,44.4845 C100.6792,44.4845 100.8732,44.3415 100.8932,44.1645 L102.3462,31.3115 C102.3692,31.0995 102.2112,30.9215 101.9992,30.9215 Z M221.4962,30.8871 L217.8122,30.8871 L216.2762,44.4841 L219.9602,44.4841 C220.9872,44.4841 221.7752,43.7761 221.8902,42.7481 L223.0352,32.6211 C223.1512,31.5951 222.5232,30.8871 221.4962,30.8871 Z M245.607,38.9877 L242.298,38.9877 L241.939,42.1487 L245.25,42.1487 C245.4,42.1487 245.475,42.0427 245.486,41.9367 L245.793,39.2207 C245.806,39.1147 245.757,38.9877 245.607,38.9877 Z M79.345,30.8869 L74.67,30.8869 L73.826,38.3579 L78.5,38.3579 C78.678,38.3579 78.838,38.1809 78.854,38.0399 L79.623,31.2409 C79.643,31.0649 79.522,30.8869 79.345,30.8869 Z M177.3108,30.8867 L172.2128,30.8867 L171.4928,37.2597 L176.5908,37.2597 C176.7338,37.2597 176.9298,37.0847 176.9448,36.9407 L177.5898,31.2407 C177.6098,31.0637 177.4528,30.8867 177.3108,30.8867 Z M246.24,33.3847 L242.93,33.3847 L242.596,36.3557 L245.904,36.3557 C246.054,36.3557 246.129,36.2497 246.144,36.1227 L246.427,33.6177 C246.439,33.5117 246.39,33.3847 246.24,33.3847 Z M286.2772,30.4963 L280.7552,30.4963 L280.1932,35.4543 L285.7172,35.4543 C285.9662,35.4543 286.0912,35.2763 286.1142,35.0663 L286.5872,30.8873 C286.6062,30.7093 286.5272,30.4963 286.2772,30.4963 Z",id:"Combined-Shape",fill:"#3F3A60"}),r.createElement("polygon",{id:"Fill-25",fill:"#FF5100",points:"49.374 13.936 41.903 15.973 49.219 -4.8316906e-13 1.787 17.482 4.379 38.424 -3.37507799e-13 42.651 13.058 75.406 40.813 65.166 50.461 42.483 46.319 38.485"}),r.createElement("polygon",{id:"Fill-27",fill:"#FFFFFF",points:"15.1196 63.3086 33.8576 44.0036 26.7606 33.4056 34.6816 16.0356 17.2286 34.1636 23.9436 44.2936"})))))}var C=r.forwardRef(j),x=(a.p,[{Header:"Rank",accessor:"statistics[0].ratings[0].ranks[0].rank[0].$.value",maxWidth:75,sortMethod:function(e,t){return(e=null===e||void 0===e||"N/A"===e?1/0:e)>(t=null===t||void 0===t||"N/A"===t?1/0:t)?1:e<t?-1:0}},{Header:"",accessor:"thumbnail[0]",maxWidth:75,sortable:!1,Cell:function(e){return Object(m.jsx)("img",{src:e.value,width:"64",alt:"thumbnail",className:"thumbnail"})}},{Header:"Title",accessor:"name[0].$.value",minWidth:150,maxWidth:450,filterable:!0,style:{whiteSpace:"unset"},Cell:function(e){return Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("a",{href:"https://boardgamegeek.com/boardgame/"+e.original.$.id,target:"_blank",rel:"noopener noreferrer",children:e.value})," ",Object(m.jsxs)("span",{className:"yearPublished",children:["(",e.original.yearpublished[0].$.value,")"]})]})}},{Header:"Avg Rating",accessor:"statistics[0].ratings[0].average[0].$.value",defaultSortDesc:!0,maxWidth:100,Cell:function(e){return Object(m.jsx)("div",{className:"ratingContainer",children:Object(m.jsx)("div",{className:"averageRating",style:{backgroundColor:Math.round(10*e.value)/10>=9?"#249563":Math.round(10*e.value)/10>=8?"#2fc482":Math.round(10*e.value)/10>=7?"#1d8acd":Math.round(10*e.value)/10>=5?"#5369a2":Math.round(10*e.value)/10>=3?"#df4751":"#db303b"},children:Math.round(10*e.value)/10})})}},{Header:"Min Players",accessor:"minplayers[0].$.value",maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?1/0:e)>(t=null===t||void 0===t||"--"===t?1/0:t)?1:e<t?-1:0}},{Header:"Max Players",accessor:"maxplayers[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0}},{Header:"Play Time",accessor:"maxplaytime[0].$.value",defaultSortDesc:!0,maxWidth:100,sortMethod:function(e,t){return(e=null===e||void 0===e||"--"===e?-1/0:e)>(t=null===t||void 0===t||"--"===t?-1/0:t)?1:e<t?-1:0},Cell:function(e){return Object(m.jsxs)("span",{children:[e.value," Min"]})}},{Header:"Weight",accessor:"statistics[0].ratings[0].averageweight[0].$.value",maxWidth:100,Cell:function(e){return Object(m.jsxs)("strong",{children:[Object(m.jsx)("span",{style:{color:Math.round(100*e.value)/100>=5||Math.round(100*e.value)/100>=4||Math.round(100*e.value)/100>=3?"#ff6b26":(Math.round(100*e.value),"#5bda98")},children:Math.round(100*e.value)/100})," / 5"]})}}]),y=a(18),O=a.n(y),w=a(56),k=(a(95),function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),l=Object(c.a)(i,2),u=l[0],f=l[1],v=Object(r.useState)(void 0),g=Object(c.a)(v,2),j=g[0],y=g[1],k=Object(r.useCallback)((function(e){f(!0),fetch(e).then((function(t){if(200===t.status)return t.text();202===t.status?setTimeout((function(){return k(e)}),5e3):console.log("error: ",t.status)})).then(function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var a,r,i,l,o,c,u,L;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i={},l=[],O.a.parseString(t,(function(e,t){if(t.items&&"0"!==t.items.$.totalitems&&(a=Number(t.items.$.totalitems),t.items.item.forEach((function(e){r.push(e.$.objectid),i[e.$.objectid]=e}))),a>20)for(;r.length;)l.push(r.splice(0,20))})),!(a>0&&a<=20)){e.next=8;break}return e.abrupt("return",fetch(d+r.join()).then((function(e){return e.text()})).then((function(e){return O.a.parseString(e,(function(e,t){b(t.items.item,i),n((function(e){return e.concat(t.items.item)})),f(!1)}))})));case 8:return o=l.map((function(e){return fetch(d+e.join())})),e.next=11,Promise.all(o);case 11:return c=e.sent,u=c.map((function(e){return e.text()})),e.next=15,Promise.all(u);case 15:return L=e.sent,e.abrupt("return",L.map((function(e){return O.a.parseString(e,(function(e,t){b(t.items.item,i),n((function(e){return e.concat(t.items.item)})),f(!1)}))})));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(r.useEffect)((function(){!function(){var e,t=document.querySelectorAll("div.rt-th > input"),a=Object(p.a)(t);try{for(a.s();!(e=a.n()).done;)e.value.placeholder="Search..."}catch(n){a.e(n)}finally{a.f()}}();var e=new URL(document.location).searchParams,t=e.get("username"),a=e.get("rows");if(null!==a&&y(Number(a)),null!==t){var n=L+t.toLowerCase();k(n)}}),[k]),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:Object(m.jsx)("a",{className:"h1Link",href:".",children:"Better BGG Collection"})}),Object(m.jsx)("p",{className:"description",children:"Enter your BoardGameGeek username below to pull up your collection!"}),Object(m.jsx)(h,{recursiveFetchAndWait:k,setGameList:n}),Object(m.jsx)("p",{className:"tipText",children:"Tip: Hold shift when sorting to multi-sort!"}),Object(m.jsx)(w.a,{data:a,columns:x,defaultSorted:[{id:"statistics[0].ratings[0].ranks[0].rank[0].$.value",desc:!1}],showPaginationTop:!0,minRows:5,pageSizeOptions:[5,10,20,25,50,100,300,500,1e3,2e3,5e3,1e4],defaultPageSize:300,pageSize:j,loading:u,noDataText:"No games found or you haven't entered your username yet",className:"-highlight",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a]).toLowerCase().includes(e.value.toLowerCase())}}),Object(m.jsxs)("div",{id:"footer",children:[Object(m.jsxs)("p",{children:["Page created with ",Object(m.jsx)("span",{role:"img","aria-label":"Red Heart",children:"\u2764\ufe0f"})]}),Object(m.jsx)("a",{href:"https://boardgamegeek.com/wiki/page/BGG_XML_API2",target:"_blank",rel:"noreferrer",onClick:function(){return window.requestAnimationFrame.track("BGG Logo Clicked")},children:Object(m.jsx)(C,{id:"bgg-logo"})}),";"]})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(m.jsx)(k,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[96,1,2]]]);
//# sourceMappingURL=main.e318bd33.chunk.js.map